# æ–‡æ¡£ä¸­å¿ƒ

æ¬¢è¿æ¥åˆ° Garmin Running Data Analytics çš„æ–‡æ¡£ä¸­å¿ƒã€‚è¿™é‡Œæä¾›äº†å®Œæ•´çš„ä½¿ç”¨æŒ‡å—å’ŒæŠ€æœ¯æ–‡æ¡£ã€‚

## å¿«é€Ÿå¯¼èˆª

### æ–°æ‰‹å…¥é—¨

1. **[å¿«é€Ÿå¼€å§‹](../README.md#å¿«é€Ÿå¼€å§‹)** - 5 åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹
2. **[éƒ¨ç½²æŒ‡å—](deployment.md)** - éƒ¨ç½²åˆ° Vercel
3. **[æ•°æ®åŒæ­¥è¯´æ˜](data-sync.md)** - é…ç½® Garmin æ•°æ®åŒæ­¥

### æ ¸å¿ƒæ–‡æ¡£

- **[API æ¥å£æ–‡æ¡£](api-reference.md)** - å®Œæ•´çš„ API å‚è€ƒ
- **[VDOT è®¡ç®—è¯´æ˜](vdot-calculation.md)** - è·‘åŠ›è®¡ç®—åŸç†å’Œä½¿ç”¨
- **[å¸¸è§é—®é¢˜](faq.md)** - å¸¸è§é—®é¢˜è§£ç­”

---

## æ–‡æ¡£åˆ—è¡¨

### ğŸ“– ä½¿ç”¨æŒ‡å—

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [éƒ¨ç½²æŒ‡å—](deployment.md) | å¦‚ä½•éƒ¨ç½²åˆ° Vercel å’Œé…ç½® GitHub Actions |
| [æ•°æ®åŒæ­¥è¯´æ˜](data-sync.md) | Garmin æ•°æ®åŒæ­¥åŸç†å’Œé…ç½®æ–¹æ³• |
| [å¸¸è§é—®é¢˜](faq.md) | å¸¸è§é—®é¢˜å’Œæ•…éšœæ’æŸ¥ |

### ğŸ“š æŠ€æœ¯æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [API æ¥å£æ–‡æ¡£](api-reference.md) | å®Œæ•´çš„ RESTful API å‚è€ƒ |
| [VDOT è®¡ç®—è¯´æ˜](vdot-calculation.md) | VDOT è·‘åŠ›è®¡ç®—å…¬å¼å’Œè®­ç»ƒå»ºè®® |

### ğŸ“¦ å‚è€ƒèµ„æ–™

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [ç¯å¢ƒå˜é‡ç¤ºä¾‹](.env.example) | ç¯å¢ƒå˜é‡é…ç½®æ¨¡æ¿ï¼ˆå« Garmin è´¦å·å¯†ç ä¸ Token è¯´æ˜ï¼‰ |

---

## æŒ‰ä½¿ç”¨åœºæ™¯æŸ¥æ‰¾

### åœºæ™¯ 1: æˆ‘æƒ³éƒ¨ç½²è¿™ä¸ªé¡¹ç›®

1. é˜…è¯» [å¿«é€Ÿå¼€å§‹](../README.md#å¿«é€Ÿå¼€å§‹) äº†è§£åŸºæœ¬æ¦‚å¿µ
2. è·Ÿéš [éƒ¨ç½²æŒ‡å—](deployment.md) ä¸€æ­¥æ­¥éƒ¨ç½²
3. é…ç½® [æ•°æ®åŒæ­¥](data-sync.md) å®ç°è‡ªåŠ¨æ›´æ–°
4. é‡åˆ°é—®é¢˜æŸ¥çœ‹ [å¸¸è§é—®é¢˜](faq.md)

### åœºæ™¯ 2: æˆ‘æƒ³äº†è§£ VDOT æ˜¯ä»€ä¹ˆ

1. é˜…è¯» [VDOT è®¡ç®—è¯´æ˜](vdot-calculation.md) äº†è§£åŸç†
2. æŸ¥çœ‹ [API æ–‡æ¡£ - VDOT è¶‹åŠ¿](api-reference.md#8-è·å–-vdot-è¶‹åŠ¿) äº†è§£å¦‚ä½•è·å–æ•°æ®
3. æ ¹æ® VDOT åˆ¶å®šè®­ç»ƒè®¡åˆ’

### åœºæ™¯ 3: æˆ‘æƒ³ä½¿ç”¨ API æ¥å£

1. é˜…è¯» [API æ¥å£æ–‡æ¡£](api-reference.md) äº†è§£æ‰€æœ‰å¯ç”¨æ¥å£
2. æŸ¥çœ‹æ¥å£ç¤ºä¾‹å’Œå“åº”æ ¼å¼
3. æ ¹æ®éœ€æ±‚è°ƒç”¨ç›¸åº”çš„ API

### åœºæ™¯ 4: æˆ‘é‡åˆ°äº†é—®é¢˜

1. æŸ¥çœ‹ [å¸¸è§é—®é¢˜](faq.md) å¯»æ‰¾è§£å†³æ–¹æ¡ˆ
2. ä½¿ç”¨æ•…éšœæ’æŸ¥æ¸…å•è¯Šæ–­é—®é¢˜
3. åœ¨ [GitHub Issues](https://github.com/xuandao/pbRun/issues) æé—®

---

## æ ¸å¿ƒæ¦‚å¿µ

### æ•°æ®æµç¨‹

```
Garmin Connect â†’ æ•°æ®åŒæ­¥ â†’ SQLite æ•°æ®åº“ â†’ API æœåŠ¡ â†’ Web ç•Œé¢
```

1. **Garmin Connect**: è¿åŠ¨æ•°æ®çš„æ¥æº
2. **æ•°æ®åŒæ­¥**: é€šè¿‡ GitHub Actions æ¯æ—¥è‡ªåŠ¨åŒæ­¥
3. **SQLite æ•°æ®åº“**: ç¦»çº¿å­˜å‚¨ï¼Œéšä»£ç éƒ¨ç½²
4. **API æœåŠ¡**: Next.js API Routes æä¾› RESTful æ¥å£
5. **Web ç•Œé¢**: ECharts å¯è§†åŒ–å±•ç¤º

### æŠ€æœ¯æ ˆ

- **å‰ç«¯**: Next.js 16 + React 19 + TailwindCSS
- **åç«¯**: Next.js API Routes + SQLite
- **æ•°æ®åŒæ­¥**: Node.js + Garmin Connect API
- **éƒ¨ç½²**: Vercel + GitHub Actions
- **å¯è§†åŒ–**: ECharts

### æ ¸å¿ƒä¼˜åŠ¿

- **å®Œå…¨å…è´¹**: æ— éœ€è´­ä¹°äº‘æ•°æ®åº“
- **æ•°æ®ç¦»çº¿åŒ–**: SQLite éšä»£ç éƒ¨ç½²
- **è‡ªåŠ¨åŒæ­¥**: GitHub Actions æ¯æ—¥è‡ªåŠ¨è¿è¡Œ
- **éšç§å®‰å…¨**: æ•°æ®å­˜å‚¨åœ¨è‡ªå·±çš„ GitHub ä»“åº“

---

## é¡¹ç›®ç»“æ„

```
garmin_data/
â”œâ”€â”€ app/                    # Next.js åº”ç”¨
â”‚   â”œâ”€â”€ api/               # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ activities/   # æ´»åŠ¨ç›¸å…³æ¥å£
â”‚   â”‚   â”œâ”€â”€ stats/        # ç»Ÿè®¡ç›¸å…³æ¥å£
â”‚   â”‚   â”œâ”€â”€ analysis/     # åˆ†æç›¸å…³æ¥å£
â”‚   â”‚   â””â”€â”€ vdot/         # VDOT æ¥å£
â”‚   â”œâ”€â”€ list/              # æ´»åŠ¨åˆ—è¡¨é¡µé¢
â”‚   â”œâ”€â”€ analysis/          # æ•°æ®åˆ†æé¡µé¢
â”‚   â”œâ”€â”€ stats/             # ç»Ÿè®¡é¡µé¢
â”‚   â”œâ”€â”€ lib/               # å·¥å…·åº“
â”‚   â”‚   â”œâ”€â”€ db.ts         # æ•°æ®åº“è®¿é—®
â”‚   â”‚   â”œâ”€â”€ types.ts      # ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ format.ts     # æ ¼å¼åŒ–å·¥å…·
â”‚   â””â”€â”€ data/              # SQLite æ•°æ®åº“
â”‚       â””â”€â”€ activities.db
â”œâ”€â”€ scripts/               # æ•°æ®åŒæ­¥è„šæœ¬
â”‚   â”œâ”€â”€ sync-garmin.js     # ä¸»åŒæ­¥è„šæœ¬
â”‚   â”œâ”€â”€ garmin-client.js   # Garmin API å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ fit-parser.js      # FIT æ–‡ä»¶è§£æ
â”‚   â”œâ”€â”€ vdot-calculator.js # VDOT è®¡ç®—
â”‚   â””â”€â”€ db-manager.js      # æ•°æ®åº“ç®¡ç†
â”œâ”€â”€ .github/workflows/     # GitHub Actions
â”‚   â””â”€â”€ sync_garmin_data.yml
â””â”€â”€ docs/                  # æ–‡æ¡£
    â”œâ”€â”€ README.md          # æ–‡æ¡£ç´¢å¼•ï¼ˆæœ¬æ–‡ä»¶ï¼‰
    â”œâ”€â”€ deployment.md      # éƒ¨ç½²æŒ‡å—
    â”œâ”€â”€ data-sync.md       # æ•°æ®åŒæ­¥è¯´æ˜
    â”œâ”€â”€ api-reference.md   # API æ–‡æ¡£
    â”œâ”€â”€ vdot-calculation.md # VDOT è¯´æ˜
    â””â”€â”€ faq.md             # å¸¸è§é—®é¢˜
```

---

## æ•°æ®åº“ç»“æ„

### ä¸»è¦æ•°æ®è¡¨

| è¡¨å | è¯´æ˜ | è®°å½•æ•°ï¼ˆç¤ºä¾‹ï¼‰ |
|------|------|----------------|
| `activities` | æ´»åŠ¨æ±‡æ€»æ•°æ® | 150+ |
| `laps` | åˆ†æ®µæ•°æ® | 1500+ |
| `records` | è®°å½•ç‚¹æ•°æ® | 450000+ |
| `hr_zones` | å¿ƒç‡åŒºé—´ç»Ÿè®¡ï¼ˆç¼“å­˜ï¼‰ | 150+ |
| `vdot_trend` | VDOT è¶‹åŠ¿æ•°æ®ï¼ˆç¼“å­˜ï¼‰ | 150+ |

è¯¦ç»†ç»“æ„è¯·å‚è€ƒ [æ•°æ®åŒæ­¥è¯´æ˜ - æ•°æ®ç»“æ„](data-sync.md#æ•°æ®ç»“æ„)ã€‚

---

## API ç«¯ç‚¹æ¦‚è§ˆ

| ç«¯ç‚¹ | è¯´æ˜ | æ–‡æ¡£ |
|------|------|------|
| `GET /api/activities` | è·å–æ´»åŠ¨åˆ—è¡¨ | [API æ–‡æ¡£](api-reference.md#1-è·å–æ´»åŠ¨åˆ—è¡¨) |
| `GET /api/activities/{id}` | è·å–æ´»åŠ¨è¯¦æƒ… | [API æ–‡æ¡£](api-reference.md#3-è·å–æ´»åŠ¨è¯¦æƒ…) |
| `GET /api/activities/{id}/laps` | è·å–åˆ†æ®µæ•°æ® | [API æ–‡æ¡£](api-reference.md#4-è·å–æ´»åŠ¨åˆ†æ®µæ•°æ®) |
| `GET /api/stats` | è·å–ç»Ÿè®¡æ•°æ® | [API æ–‡æ¡£](api-reference.md#6-è·å–ç»Ÿè®¡æ•°æ®) |
| `GET /api/vdot` | è·å– VDOT è¶‹åŠ¿ | [API æ–‡æ¡£](api-reference.md#8-è·å–-vdot-è¶‹åŠ¿) |
| `GET /api/analysis/hr-zones` | å¿ƒç‡åŒºé—´åˆ†æ | [API æ–‡æ¡£](api-reference.md#9-å¿ƒç‡åŒºé—´åˆ†æ) |
| `GET /api/analysis/pace-zones` | é…é€Ÿåˆ†å¸ƒåˆ†æ | [API æ–‡æ¡£](api-reference.md#10-é…é€ŸåŒºé—´åˆ†æ) |

å®Œæ•´ API æ–‡æ¡£: [api-reference.md](api-reference.md)

---

## å¸¸ç”¨å‘½ä»¤

### å¼€å‘ç¯å¢ƒ

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start
```

### æ•°æ®åŒæ­¥

```bash
# åˆå§‹åŒ–æ‰€æœ‰å†å²æ•°æ®
npm run init:data

# åŒæ­¥æœ€è¿‘ 10 æ¡æ´»åŠ¨
node scripts/sync-garmin.js --limit 10

# å¢é‡åŒæ­¥æ–°æ´»åŠ¨
node scripts/sync-garmin.js

# å¼ºåˆ¶é‡æ–°è§£ææ‰€æœ‰æ´»åŠ¨
node scripts/sync-garmin.js --force
```

### æ•°æ®åº“ç®¡ç†

```bash
# æ›´æ–°ç»Ÿè®¡ç¼“å­˜
node scripts/preprocess-stats-cache.js --mode full

# éªŒè¯æ•°æ®å®Œæ•´æ€§
node scripts/validate-data.js

# æ¸…ç†æ—§æ•°æ®ï¼ˆä¿ç•™æœ€è¿‘ 1 å¹´ï¼‰
node scripts/db-manager.js --clean --keep-days 365

# å‹ç¼©æ•°æ®åº“
node scripts/db-manager.js --vacuum
```

---

## å­¦ä¹ èµ„æº

### è·‘æ­¥è®­ç»ƒç†è®º

- **Jack Daniels' Running Formula** - VDOT ç†è®ºçš„æƒå¨è‘—ä½œ
- **80/20 Running** - 80/20 è®­ç»ƒæ³•åˆ™
- **Training and Racing with a Power Meter** - è·‘æ­¥åŠŸç‡è®­ç»ƒ

### æŠ€æœ¯æ–‡æ¡£

- [Next.js æ–‡æ¡£](https://nextjs.org/docs)
- [SQLite æ–‡æ¡£](https://www.sqlite.org/docs.html)
- [Garmin FIT SDK](https://developer.garmin.com/fit/overview/)
- [ECharts æ–‡æ¡£](https://echarts.apache.org/zh/index.html)

### ç¤¾åŒºèµ„æº

- [GitHub Discussions](https://github.com/xuandao/pbRun/discussions) - è®¨è®ºå’Œäº¤æµ
- [GitHub Issues](https://github.com/xuandao/pbRun/issues) - é—®é¢˜åé¦ˆ
- [Changelog](https://github.com/xuandao/pbRun/releases) - ç‰ˆæœ¬æ›´æ–°æ—¥å¿—

---

## è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ã€æ–‡æ¡£æˆ–å»ºè®®ï¼

### å¦‚ä½•è´¡çŒ®

1. **æŠ¥å‘Š Bug**: åœ¨ [Issues](https://github.com/xuandao/pbRun/issues) ä¸­æäº¤
2. **å»ºè®®æ–°åŠŸèƒ½**: åœ¨ [Discussions](https://github.com/xuandao/pbRun/discussions) ä¸­è®¨è®º
3. **æäº¤ä»£ç **: åˆ›å»º Pull Request
4. **æ”¹è¿›æ–‡æ¡£**: ç›´æ¥ç¼–è¾‘ Markdown æ–‡ä»¶

### è´¡çŒ®è€…

æ„Ÿè°¢æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

æŸ¥çœ‹å®Œæ•´çš„ [è´¡çŒ®è€…åˆ—è¡¨](https://github.com/xuandao/pbRun/graphs/contributors)ã€‚

---

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](../LICENSE) å¼€æºã€‚

---

## è”ç³»æ–¹å¼

- **GitHub**: [@xuandao](https://github.com/xuandao)
- **Email**: your-email@example.com
- **é¡¹ç›®ä¸»é¡µ**: [GitHub](https://github.com/xuandao/pbRun)
- **åœ¨çº¿æ¼”ç¤º**: [Demo](https://your-demo.vercel.app)

---

## æ›´æ–°æ—¥å¿—

æŸ¥çœ‹ [Releases](https://github.com/xuandao/pbRun/releases) äº†è§£æœ€æ–°æ›´æ–°ã€‚

### æœ€è¿‘æ›´æ–°

- **v1.0.0** (2026-02-14): é¦–æ¬¡å‘å¸ƒ
  - å®Œæ•´çš„ Garmin æ•°æ®åŒæ­¥åŠŸèƒ½
  - VDOT è®¡ç®—å’Œè¶‹åŠ¿åˆ†æ
  - å¿ƒç‡åŒºé—´å’Œé…é€Ÿåˆ†å¸ƒåˆ†æ
  - Vercel ä¸€é”®éƒ¨ç½²

---

å¦‚æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨ [GitHub Issues](https://github.com/xuandao/pbRun/issues) ä¸­åé¦ˆï¼
